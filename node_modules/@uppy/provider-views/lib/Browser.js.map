{"version":3,"names":["h","classNames","remoteFileObjToLocal","SearchFilterInput","FooterActions","Item","VIRTUAL_SHARED_DIR","Browser","props","currentSelection","folders","files","uppyFiles","viewType","headerComponent","showBreadcrumbs","isChecked","toggleCheckbox","recordShiftKeyPress","handleScroll","showTitles","i18n","validateRestrictions","isLoading","showSearchFilter","search","searchTerm","clearSearch","searchOnInput","searchInputLabel","clearSearchLabel","getNextFolder","cancel","done","columns","noResultsLabel","selected","length","className","class","inputLabel","inputClassName","onScroll","role","tabIndex","map","folder","_isChecked","id","title","name","getItemIcon","icon","event","type","isDisabled","loading","isCheckboxDisabled","handleFolderClick","file","restrictionError","author"],"sources":["Browser.jsx"],"sourcesContent":["import { h } from 'preact'\n\nimport classNames from 'classnames'\nimport remoteFileObjToLocal from '@uppy/utils/lib/remoteFileObjToLocal'\nimport SearchFilterInput from './SearchFilterInput.jsx'\nimport FooterActions from './FooterActions.jsx'\nimport Item from './Item/index.jsx'\n\nconst VIRTUAL_SHARED_DIR = 'shared-with-me'\n\nfunction Browser (props) {\n  const {\n    currentSelection,\n    folders,\n    files,\n    uppyFiles,\n    viewType,\n    headerComponent,\n    showBreadcrumbs,\n    isChecked,\n    toggleCheckbox,\n    recordShiftKeyPress,\n    handleScroll,\n    showTitles,\n    i18n,\n    validateRestrictions,\n    isLoading,\n    showSearchFilter,\n    search,\n    searchTerm,\n    clearSearch,\n    searchOnInput,\n    searchInputLabel,\n    clearSearchLabel,\n    getNextFolder,\n    cancel,\n    done,\n    columns,\n    noResultsLabel,\n  } = props\n\n  const selected = currentSelection.length\n\n  return (\n    <div\n      className={classNames(\n        'uppy-ProviderBrowser',\n        `uppy-ProviderBrowser-viewType--${viewType}`,\n      )}\n    >\n      {headerComponent && (\n        <div className=\"uppy-ProviderBrowser-header\">\n          <div\n            className={classNames(\n              'uppy-ProviderBrowser-headerBar',\n              !showBreadcrumbs && 'uppy-ProviderBrowser-headerBar--simple',\n            )}\n          >\n            {headerComponent}\n          </div>\n        </div>\n      )}\n\n      {showSearchFilter && (\n        <div class=\"uppy-ProviderBrowser-searchFilter\">\n          <SearchFilterInput\n            search={search}\n            searchTerm={searchTerm}\n            clearSearch={clearSearch}\n            inputLabel={searchInputLabel}\n            clearSearchLabel={clearSearchLabel}\n            inputClassName=\"uppy-ProviderBrowser-searchFilterInput\"\n            searchOnInput={searchOnInput}\n          />\n        </div>\n      )}\n\n      {(() => {\n        if (isLoading) {\n          return (\n            <div className=\"uppy-Provider-loading\">\n              <span>{i18n('loading')}</span>\n            </div>\n          )\n        }\n\n        if (!folders.length && !files.length) {\n          return (\n            <div className=\"uppy-Provider-empty\">\n              {noResultsLabel}\n            </div>\n          )\n        }\n\n        return (\n          <div className=\"uppy-ProviderBrowser-body\">\n            <ul\n              className=\"uppy-ProviderBrowser-list\"\n              onScroll={handleScroll}\n              role=\"listbox\"\n              // making <ul> not focusable for firefox\n              tabIndex=\"-1\"\n            >\n              {folders.map((folder) => {\n                return Item({\n                  columns,\n                  showTitles,\n                  viewType,\n                  i18n,\n                  id: folder.id,\n                  title: folder.name,\n                  getItemIcon: () => folder.icon,\n                  isChecked: isChecked(folder),\n                  toggleCheckbox: (event) => toggleCheckbox(event, folder),\n                  recordShiftKeyPress,\n                  type: 'folder',\n                  isDisabled: isChecked(folder)?.loading,\n                  isCheckboxDisabled: folder.id === VIRTUAL_SHARED_DIR,\n                  handleFolderClick: () => getNextFolder(folder),\n                })\n              })}\n\n              {files.map((file) => {\n                const restrictionError = validateRestrictions(\n                  remoteFileObjToLocal(file),\n                  [...uppyFiles, ...currentSelection],\n                )\n\n                return Item({\n                  id: file.id,\n                  title: file.name,\n                  author: file.author,\n                  getItemIcon: () => file.icon,\n                  isChecked: isChecked(file),\n                  toggleCheckbox: (event) => toggleCheckbox(event, file),\n                  recordShiftKeyPress,\n                  columns,\n                  showTitles,\n                  viewType,\n                  i18n,\n                  type: 'file',\n                  isDisabled: restrictionError && !isChecked(file),\n                  restrictionError,\n                })\n              })}\n            </ul>\n          </div>\n        )\n      })()}\n\n      {selected > 0 && (\n        <FooterActions\n          selected={selected}\n          done={done}\n          cancel={cancel}\n          i18n={i18n}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default Browser\n"],"mappings":"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"}